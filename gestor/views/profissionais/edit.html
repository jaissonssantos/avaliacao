<md-header></md-header>

<div id="base">

  <div class="offcanvas">
  </div>

  <div id="content" ng-init="load()">
    <section>
      <div class="section-header">
        <ol class="breadcrumb">
          <li><i class="fa fa-users fa-2x"></i> <a href="profissionais/">Profissionais</a></li>
          <li class="active">Editar profissional</li>
        </ol>
      </div>
      <div class="section-body contain-lg">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <form name="$root.profissionalForm" class="form-horizontal" role="form" novalidate>
                <h3 class="text-light text-light-gray">Informações</h3>
                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Nome</label>
                  <div class="col-md-9">
                    <input type="text" ng-model="profissional.nome" name="nome" required class="form-control">
                    <span ng-if="profissional.nome.length" class="input-dirty-touched">
                      <i ng-class="profissionalForm.nome.$valid ? 'fa fa-check text-success' : 'fa fa-times text-danger'"></i>
                    </span>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Profissão</label>
                  <div class="col-md-6">
                  <input type="text" ng-model="profissional.profissao" name="profissao" required class="form-control">
                  <p class="hint-block">Ex.: Cabelereiro, Manicure e outros</p>
                  <span ng-if="profissional.profissao.length" class="input-dirty-touched">
                    <i ng-class="profissionalForm.profissao.$valid ? 'fa fa-check text-success' : 'fa fa-times text-danger'"></i>
                  </span>
                </div>
                </div>

                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Email</label>
                  <div class="col-md-6">
                    <input type="email" ng-model="profissional.email" ng-change="checkEmail()" ng-model-options="{ debounce: 500 }" name="email" required class="form-control">
                    <span ng-if="profissional.email.length" class="input-dirty-touched">
                      <i ng-class="{
                        'fa fa-times text-danger' : email.found || (profissionalForm.email.$touched && profissionalForm.email.$invalid),
                        'fa fa-check text-success' : profissionalForm.email.$valid,
                        'fa fa-spinner fa-spin' : email.loading
                      }"></i>
                    </span>
                  </div>
                </div>

                <hr class="panel-wide">
                <h3 class="text-light text-light-gray">Executa</h3>

                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Serviços</label>
                  <div class="col-md-3">
                       <select
                        ng-init="loadServicos()"
                        ng-model="usuario.idservico"
                        ng-options="servico.id as servico.nome for servico in servicos"
                        class="form-control">
                      </select>
                  </div>
                  <div class="col-md-3">
                    <button ng-click="addServico(usuario.idservico)" class="btn btn-sm btn-large btn-primary">
                      <i class="fa fa-plus"></i>
                    </button>
                  </div>
                </div>

                <div class="form-group" ng-if="profissional.servicos.length">
                  <div class="col-md-9 col-md-offset-3">
                    <div class="table-modal">
                      <table class="table table-striped table-hover no-margin">
                        <thead>
                          <tr>
                            <th width="2%">#</th>
                            <th width="20%">Serviço</th>
                            <th width="14.7%"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="servico in profissional.servicos">
                            <td>{{$index+1}}</td>
                            <td>{{servico.nome}}</td>
                            <td>
                              <button class="btn btn-sm btn-danger" ng-click="delServico(servico.id)">
                                <i class="fa fa-trash"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      </div>
                  </div>
              </div>

              <hr class="panel-wide">
                <h3 class="text-light text-light-gray">Atendimento</h3>

                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Dias de Atendimento</label>
                  <div class="col-md-3">
                    <select ng-model="profissional.dia" class="form-control">
                      <option value="0">Domingo</option>
                      <option value="1">Segunda-Feira</option>
                      <option value="2">Terça-Feira</option>
                      <option value="3">Quarta-Feira</option>
                      <option value="4">Quinta-Feira</option>
                      <option value="5">Sexta-Feira</option>
                      <option value="6">Sábado</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <button ng-click="addDiaTrabalho(profissional.dia)" class="btn btn-sm btn-primary">
                      <i class="fa fa-plus"></i>
                    </button>
                  </div>

                  <div class="col-md-9 col-md-offset-3" ng-if="profissional.diastrabalho.length">
                    <div class="table-modal">
                      <table class="table table-striped table-hover no-margin">
                        <thead>
                          <tr>
                            <th width="30%">Dia</th>
                            <th width="15%">Das</th>
                            <th width="15%">Às</th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>

                          <tr ng-repeat="diatrabalho in profissional.diastrabalho">
                            <td ng-switch="diatrabalho.dia">
                              <span ng-switch-when="0">Domingo</span>
                              <span ng-switch-when="1">Segunda-Feira</span>
                              <span ng-switch-when="2">Terça-Feira</span>
                              <span ng-switch-when="3">Quarta-Feira</span>
                              <span ng-switch-when="4">Quinta-Feira</span>
                              <span ng-switch-when="5">Sexta-Feira</span>
                              <span ng-switch-when="6">Sábado</span>
                            </td>
                            <td><input ng-model="diatrabalho.horainicial" ui-mask="99:99" size="5" type="text" required></td>
                            <td><input ng-model="diatrabalho.horafinal" ui-mask="99:99" size="5" type="text" required></td>
                            <td>
                              <button class="btn btn-sm btn-danger" ng-click="delDiaTrabalho(diatrabalho.dia)">
                                <i class="fa fa-trash"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      </div>
                    </div>
                  </div>

                <hr class="panel-wide">
                <h3 class="text-light text-light-gray">Período de atendimento</h3>  

                <div class="form-group">
                  <label class="col-md-3 control-label form-horizontal">Tempo de agendamento</label>
                  <div class="col-md-3">
                    <select ng-model="profissional.tempoconsulta"
                          id="tempoconsulta"
                          name="tempoconsulta"
                          class="form-control">
                              <option value="15">15 minutos</option>
                              <option value="30">30 minutos</option>
                              <option value="45">45 minutos</option>
                              <option value="60">1 hora</option>
                              <option value="75">1 hora e 15 minutos</option>
                              <option value="90">1 hora e 30 minutos</option>
                              <option value="105">1 hora e 45 minutos</option>
                              <option value="120">2 horas</option>
                    </select>
                    <span ng-if="profissionalForm.tempoconsulta.$viewValue.length" class="input-dirty-touched">
                      <i ng-class="profissionalForm.tempoconsulta.$valid ? 'fa fa-check text-success' : 'fa fa-times text-danger'"></i>
                    </span>
                  </div>
                </div>

                <hr class="panel-wide">
                <div class="form-group">
                  <div class="col-md-9 col-md-offset-3">
                    <button ng-click="update()"
                          ng-disabled="profissionalForm.$invalid || status.loading"
                          class="btn btn-sm btn-primary">
                          <i ng-if="status.loading" class="fa fa-spin fa-spinner"></i> Salvar
                    </button>
                    <a href="profissionais/">Voltar</a>
                  </div>
                </div>


              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  <md-sidebar></md-sidebar>
  <md-aside></md-aside>
</div>
